<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang Admin - Ti·ªám Hoa T∆∞∆°i</title>
    <link rel="icon" href="images/admin.png" type="image/png">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #f1f5f9; padding: 20px; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        h2 { color: #334155; }
        
        /* CSS cho b·∫£ng */
        .table-container { background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); overflow: hidden; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid #e2e8f0; }
        th { background-color: #f8fafc; font-weight: 600; color: #475569; }
        tr:hover { background-color: #f1f5f9; }
        
        /* Tr·∫°ng th√°i */
        .status-badge { padding: 5px 10px; border-radius: 20px; font-size: 12px; font-weight: bold; color: white; }
        .status-new { background-color: #3b82f6; } /* Xanh d∆∞∆°ng */
        
        /* N√∫t Refresh */
        .btn-refresh { background-color: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; }
        .btn-refresh:hover { background-color: #059669; }
    </style>
</head>
<body>

    <div class="header">
        <h2>üå∏ Qu·∫£n L√Ω ƒê∆°n H√†ng</h2>
        <button class="btn-refresh" onclick="loadOrders()">üîÑ C·∫≠p nh·∫≠t ƒë∆°n m·ªõi</button>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Kh√°ch H√†ng</th>
                    <th>SƒêT</th>
                    <th>ƒê·ªãa Ch·ªâ</th>
                    <th>Ghi Ch√∫</th>
                    <th>T·ªïng Ti·ªÅn</th>
                    <th>Ng√†y ƒê·∫∑t</th>
                    <th>Tr·∫°ng Th√°i</th>
                </tr>
            </thead>
            <tbody id="orderTableBody">
                </tbody>
        </table>
    </div>

    <script>
        // H√†m g·ªçi API ƒë·ªÉ l·∫•y danh s√°ch ƒë∆°n
        async function loadOrders() {
            try {
                let response = await fetch('/api/orders/all'); // G·ªçi Backend
                if (response.ok) {
                    let orders = await response.json();
                    renderTable(orders);
                } else {
                    alert("L·ªói t·∫£i d·ªØ li·ªáu!");
                }
            } catch (error) {
                console.error("L·ªói:", error);
            }
        }

        // H√†m v·∫Ω b·∫£ng
        function renderTable(orders) {
            let tbody = document.getElementById("orderTableBody");
            tbody.innerHTML = ""; // X√≥a d·ªØ li·ªáu c≈©

            orders.forEach(order => {
                let row = `
                    <tr>
                        <td>#${order.id}</td>
                        <td><strong>${order.customerName}</strong></td>
                        <td>${order.phone}</td>
                        <td>${order.address}</td>
                        <td>${order.note}</td>
                        <td style="color: #db2777; font-weight: bold;">${order.totalAmount.toLocaleString()} ƒë</td>
                        <td>${new Date(order.orderDate).toLocaleString('vi-VN')}</td>
                        <td><span class="status-badge status-new">${order.status}</span></td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        // T·ª± ƒë·ªông t·∫£i khi m·ªü trang
        loadOrders();
    </script>

</body>
</html>