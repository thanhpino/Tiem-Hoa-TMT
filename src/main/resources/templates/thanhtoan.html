<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanh to√°n - Ti·ªám Hoa T∆∞∆°i TMT</title>
    <link rel="icon" href="images/paymentfvc.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script> 
    <script src="https://www.paypal.com/sdk/js?client-id=AU-h8a9Gg74tcWPBGoLNSg7e2L5NjQVwykNNgjJH35iheuv9eJwq9m60Er0_ovG30ZO54IoBgcZz5V7e&currency=USD"></script>
    <link rel="stylesheet" href="/css/thanhtoan.css">
    <link rel="stylesheet" href="/css/index.css">
</head>
<body class="bg-slate-100 text-slate-800">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-4xl">
        <div id="checkout-content">
            <header class="text-center mb-10">
                <h1 class="text-4xl font-bold text-pink-600">X√°c Nh·∫≠n ƒê∆°n Hoa</h1>
                <p class="text-slate-500 mt-2 text-lg">Vui l√≤ng ki·ªÉm tra l·∫°i gi·ªè hoa v√† ho√†n t·∫•t thanh to√°n nh√©!</p>
            </header>

            <div class="bg-white p-8 rounded-2xl shadow-lg">
                <h2 class="text-2xl font-semibold mb-6 border-b pb-4 text-slate-700">Chi ti·∫øt ƒë∆°n h√†ng</h2>
                <div id="order-items" class="space-y-4 mb-6"></div>
                <div class="mb-8">
                    <h2 class="text-2xl font-semibold mb-4 text-slate-700">Th√¥ng tin giao h√†ng</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="col-span-2 md:col-span-1">
                            <label class="block text-sm font-medium text-slate-700 mb-1">H·ªç v√† t√™n <span class="text-red-500">*</span></label>
                            <input type="text" id="customerName" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" 
                                class="w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all">
                        </div>

                        <div class="col-span-2 md:col-span-1">
                            <label class="block text-sm font-medium text-slate-700 mb-1">S·ªë ƒëi·ªán tho·∫°i <span class="text-red-500">*</span></label>
                            <input type="tel" id="customerPhone" placeholder="V√≠ d·ª•: 0912345678" 
                                class="w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all">
                        </div>

                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-bold mb-2">Email nh·∫≠n h√≥a ƒë∆°n</label>
                            <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" placeholder="vidu@gmail.com">
                        </div>

                        <div class="col-span-2">
                            <label class="block text-sm font-medium text-slate-700 mb-1">ƒê·ªãa ch·ªâ nh·∫≠n hoa <span class="text-red-500">*</span></label>
                            <input type="text" id="deliveryAddress" placeholder="S·ªë nh√†, t√™n ƒë∆∞·ªùng, ph∆∞·ªùng, qu·∫≠n..." 
                                class="w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all">
                        </div>

                        <div class="col-span-2">
                            <label class="block text-sm font-medium text-slate-700 mb-1">L·ªùi nh·∫Øn / Ghi ch√∫ (N·∫øu c√≥)</label>
                            <textarea id="orderNote" rows="2" placeholder="Giao gi·ªù h√†nh ch√≠nh, vi·∫øt thi·ªáp ch√∫c m·ª´ng..." 
                                class="w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all"></textarea>
                        </div>
                    </div>
                </div>
                <div class="mb-6 border-b pb-6 border-dashed">
                    <label class="block text-sm font-medium text-slate-700 mb-2">M√£ gi·∫£m gi√° (Voucher)</label>
                    <div class="flex gap-2">
                        <input type="text" id="voucherCode" placeholder="Nh·∫≠p TMT2024, SV50..." 
                            class="flex-1 p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 uppercase">
                        <button onclick="applyVoucher()" type="button" 
                            class="bg-gray-800 text-white px-4 rounded-lg hover:bg-gray-700 transition-colors font-semibold whitespace-nowrap">
                            √Åp d·ª•ng
                        </button>
                    </div>
                    <p id="voucher-message" class="text-sm mt-2 hidden"></p>
                </div>

                <div class="border-t pt-4 mb-8">
                    <div class="flex justify-between items-center text-slate-600 mb-2">
                        <span>T·∫°m t√≠nh:</span>
                        <span id="sub-total" class="font-semibold">0ƒë</span> </div>
                    <div class="flex justify-between items-center text-green-600 mb-2 hidden" id="discount-row">
                        <span>Gi·∫£m gi√°:</span>
                        <span id="discount-amount" class="font-bold">-0ƒë</span>
                    </div>
                    <div class="flex justify-between items-center text-xl font-bold">
                        <span>T·ªïng c·ªông:</span>
                        <span id="total-price" class="text-pink-600">0ƒë</span>
                    </div>
                </div>

                <h2 class="text-2xl font-semibold mb-6 border-b pb-4 text-slate-700">Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n</h2>
                <div class="space-y-4 mb-8">
                     <button data-method="cod" class="payment-method w-full flex justify-between items-center p-4 border-2 rounded-lg transition-all text-left">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mr-4 text-green-500 flex-shrink-0">
                            <path d="M10 17h4"/><path d="M20 17h2v-2a2 2 0 0 0-2-2h-3.8l-1.6-3.2A2 2 0 0 0 12.8 9H8a2 2 0 0 0-2 2v9"/>
                            <path d="M2 17h2"/><path d="m2 17 2.6-6.5a2 2 0 0 1 1.8-1.3H9"/>
                            <circle cx="7" cy="17" r="2"/><circle cx="17" cy="17" r="2"/>
                            </svg>
                            <div>
                                <p class="font-semibold">Thanh to√°n khi nh·∫≠n hoa (COD)</p>
                                <p class="text-sm text-slate-500">Thanh to√°n b·∫±ng ti·ªÅn m·∫∑t khi shipper giao hoa t·∫≠n n∆°i.</p>
                            </div>
                        </div>
                        <i data-lucide="check-circle-2" class="w-6 h-6 text-pink-500 hidden ml-4"></i>
                    </button>
                     <button data-method="momo" class="payment-method w-full flex justify-between items-center p-4 border-2 rounded-lg transition-all text-left">
                        <div class="flex items-center">
                            <img src="images/momoicon.png" class="w-8 h-8 mr-4"/>
                            <div>
                                <p class="font-semibold">Thanh to√°n qua V√≠ MoMo</p>
                                <p class="text-sm text-slate-500">Qu√©t m√£ QR ƒë·ªÉ thanh to√°n.</p>
                            </div>
                        </div>
                        <i data-lucide="check-circle-2" class="w-6 h-6 text-pink-500 hidden ml-4"></i>
                    </button>
                    <button data-method="zalopay" class="payment-method w-full flex justify-between items-center p-4 border-2 rounded-lg transition-all text-left">
                        <div class="flex items-center">
                            <img src="images/zaloicon.png" class="w-8 h-8 mr-4 rounded-md"/>
                            <div>
                                <p class="font-semibold">Thanh to√°n qua ZaloPay</p>
                                <p class="text-sm text-slate-500">Thanh to√°n an to√†n v·ªõi ZaloPay.</p>
                            </div>
                        </div>
                        <i data-lucide="check-circle-2" class="w-6 h-6 text-pink-500 hidden ml-4"></i>
                    </button>
                    <button data-method="paypal" class="payment-method w-full flex justify-between items-center p-4 border-2 rounded-lg transition-all text-left">
                        <div class="flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 mr-4 text-blue-500 flex-shrink-0">
                            <rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/>
                            </svg>
                            <div>
                                <p class="font-semibold">PayPal ho·∫∑c Th·∫ª qu·ªëc t·∫ø</p>
                                <p class="text-sm text-slate-500">S·ª≠ d·ª•ng t√†i kho·∫£n PayPal ho·∫∑c th·∫ª Visa, Mastercard.</p>
                            </div>
                        </div>
                        <i data-lucide="check-circle-2" class="w-6 h-6 text-pink-500 hidden ml-4"></i>
                    </button>
                </div>

                <div id="paypal-button-container" class="hidden"></div>
                <button id="confirm-payment-button" class="w-full bg-pink-500 text-white font-bold py-3 rounded-lg mt-6 hover:bg-pink-600 transition-colors duration-300 shadow-md hidden" disabled>
                    Ho√†n t·∫•t ƒë·∫∑t hoa
                </button>
            </div>
        </div>
        <div id="thank-you-message" class="hidden text-center p-10 bg-white rounded-2xl shadow-lg">
            <h1 class="text-4xl font-bold text-pink-600 mb-4">ƒê·∫∑t hoa th√†nh c√¥ng!</h1>
            <p id="final-message" class="text-slate-600 text-lg mb-8"></p>
            <a th:href="@{/index}" class="bg-pink-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-pink-600 transition-colors">
                Quay v·ªÅ trang ch·ªß
            </a>
        </div>
    </div>
    
    <div id="payment-simulation-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-sm text-center">
            <h2 class="text-xl font-bold text-gray-800 mb-4">X√°c nh·∫≠n thanh to√°n</h2>
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://github.com/trantien-2004" class="w-48 h-48 mx-auto" alt="QR Code">
            <p class="text-sm text-slate-500 mt-4">
                <i data-lucide="loader" class="inline-block w-4 h-4 animate-spin mr-2"></i>
                ƒê√¢y l√† m√†n h√¨nh gi·∫£ l·∫≠p, giao d·ªãch s·∫Ω t·ª± ƒë·ªông x√°c nh·∫≠n sau <span id="countdown-timer" class="font-bold">5</span> gi√¢y...
            </p>
        </div>
    </div>
    <button id="chat-toggle-btn" class="fixed bottom-24 right-5 bg-white text-pink-600 p-4 rounded-full shadow-xl z-40 border-2 border-pink-100 hover:bg-pink-50 transition-all hover:scale-110 group">
        <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full animate-bounce">1</span>
        <i data-lucide="message-square-heart" class="w-6 h-6"></i>
        <span class="absolute right-full mr-3 top-1/2 -translate-y-1/2 bg-gray-800 text-white text-xs py-1 px-2 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
            Chat v·ªõi AI Florist
        </span>
    </button>

    <div id="chat-widget" class="fixed bottom-5 right-5 w-full max-w-[350px] bg-white rounded-2xl shadow-2xl z-50 hidden border border-pink-100 flex flex-col overflow-hidden transition-all duration-300 transform scale-95 opacity-0 origin-bottom-right" style="height: 500px; max-height: 80vh;">
        <div class="bg-gradient-to-r from-pink-500 to-rose-400 p-4 text-white flex justify-between items-center shadow-md">
            <div class="flex items-center gap-3">
                <div class="relative">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-pink-500">
                        <i data-lucide="bot" class="w-6 h-6"></i>
                    </div>
                    <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-white rounded-full"></div>
                </div>
                <div>
                    <h3 class="font-bold text-sm">TMT AI Florist ü§ñ</h3>
                    <p class="text-xs text-pink-100">Lu√¥n s·∫µn s√†ng t∆∞ v·∫•n!</p>
                </div>
            </div>
            <button id="close-chat-btn" class="text-white/80 hover:text-white hover:bg-white/20 p-1 rounded-full transition-colors">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>

        <div id="chat-messages" class="flex-1 p-4 overflow-y-auto bg-gray-50 space-y-4">
            <div class="flex gap-3 items-start">
                <div class="w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center text-pink-500 flex-shrink-0">
                    <i data-lucide="bot" class="w-5 h-5"></i>
                </div>
                <div class="bg-white p-3 rounded-2xl rounded-tl-none shadow-sm border border-gray-100 text-sm text-gray-700">
                    Ch√†o b·∫°n! M√¨nh l√† tr·ª£ l√Ω AI c·ªßa Ti·ªám Hoa TMT. üå∏<br>
                    B·∫°n ƒëang t√¨m hoa t·∫∑ng d·ªãp g√¨ (Sinh nh·∫≠t, T·ªè t√¨nh, Khai tr∆∞∆°ng...) hay c√≥ ng√¢n s√°ch bao nhi√™u kh√¥ng?
                </div>
            </div>
        </div>
        <div id="chat-suggestions" class="px-4 py-2 bg-gray-50 flex gap-2 overflow-x-auto whitespace-nowrap custom-scrollbar" style="scrollbar-width: none;">
            </div>

        <div class="p-3 bg-white border-t border-gray-100">
            <div class="flex items-center gap-2 bg-gray-100 rounded-full px-4 py-2 border border-transparent focus-within:border-pink-300 focus-within:bg-white transition-all">
                <input type="text" id="chat-input" placeholder="VD: T·∫∑ng b·∫°n g√°i 500k..." class="flex-1 bg-transparent outline-none text-sm text-gray-700" autocomplete="off">
                <button id="send-btn" class="text-pink-500 hover:text-pink-600 p-1 transition-transform active:scale-90">
                    <i data-lucide="send" class="w-5 h-5"></i>
                </button>
            </div>
            <div class="text-center mt-1">
                <span class="text-[10px] text-gray-400">Powered by TMT AI Engine</span>
            </div>
        </div>
    </div>
    <button id="contact-button" class="fixed bottom-5 right-5 bg-green-500 text-white font-bold p-4 rounded-full shadow-lg z-40 hover:bg-green-600 transition-transform hover:scale-110">
        <i data-lucide="phone" class="w-6 h-6"></i>
    </button>
    <div id="contact-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 hidden z-50 transition-opacity duration-300">
        <div class="bg-white rounded-3xl shadow-2xl p-8 w-full max-w-sm text-center transform transition-all scale-100">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800 font-serif">Li√™n H·ªá TMT</h2>
                <button onclick="closeContactModal()" class="text-gray-400 hover:text-gray-600 bg-gray-100 p-2 rounded-full"><i data-lucide="x" class="w-5 h-5"></i></button>
            </div>
            <p class="text-gray-500 mb-8">TMT m√¨nh lu√¥n s·∫µn s√†ng l·∫Øng nghe b·∫°n!</p>
            <div class="space-y-4">
                <a href="tel:0932013424" class="flex items-center justify-center w-full bg-pink-500 text-white font-bold py-3 px-4 rounded-xl hover:bg-pink-600 transition-colors shadow-md hover:-translate-y-1">
                    <i data-lucide="phone" class="w-5 h-5 mr-3"></i> 0932 013 424
                </a>
                <a href="https://zalo.me/0379602647" target="_blank" class="flex items-center justify-center w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-xl hover:bg-blue-600 transition-colors shadow-md hover:-translate-y-1">
                    <i data-lucide="message-circle" class="w-5 h-5 mr-3"></i> Chat Zalo
                </a>
                <a href="https://www.facebook.com/tuyen.tu.12979431" target="_blank" class="flex items-center justify-center w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-xl hover:bg-indigo-700 transition-colors shadow-md hover:-translate-y-1">
                    <i data-lucide="facebook" class="w-5 h-5 mr-3"></i> Facebook
                </a>
            </div>
        </div>
    </div>
    <script src="/js/thanhtoan.js"></script>
    <script src="/js/chatbot.js"></script>
    <script src="/js/contact.js"></script>
</body>
</html>